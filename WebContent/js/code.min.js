var callsContainer=document.getElementById("calls"),responsesContainer=document.getElementById("responses");function getLastPathSegment(){return decodeURIComponent(new RegExp("[^\\/]+(?=\\/$|$)").exec(window.location.href)||[null,""])||null}function doRequest(e,n,t){var o=new XMLHttpRequest;o.onreadystatechange=function(){4===this.readyState&&(200===this.status?n(this):t(this))},o.open("GET",e,!0),o.send()}function load(e){doRequest("https://api.cardcastgame.com/v1/decks/"+e+"/calls",function(n){var t=n.responseText;doRequest("https://api.cardcastgame.com/v1/decks/"+e+"/responses",function(n){loaded(e,JSON.parse(t),JSON.parse(n.responseText))},function(e){error(e)})},function(e){error(e)})}function error(e){console.error(e)}function loaded(e,n,t){addLinks("Download original JSON",JSON.stringify,e,"_original.json","application/json",n,t),addLinks("Download simplified JSON",toSimplified,e,"_simplified.json","application/json",n,t),addLinks("Download as text",toText,e,"_text.txt","text/plain",n,t)}function addLinks(e,n,t,o,a,i,r){callsContainer.appendChild(createLinkElm(e,"calls_"+t+o,n(i),a)),responsesContainer.appendChild(createLinkElm(e,"responses_"+t+o,n(r),a))}function toSimplified(e){for(var n=[],t=0;t<e.length;t++)n.push(e[t].text.join("_"));return JSON.stringify(n)}function toText(e){for(var n="",t=0;t<e.length;t++)n+=e[t].text.join("_")+"\r\n";return n}function generateLink(e,n){return window.URL.createObjectURL(new Blob([e],{type:n}))}function createLinkElm(e,n,t,o){var a=document.createElement("a");return a.innerHTML=e,a.download=n,a.href=generateLink(t,o),a}var code=getLastPathSegment();console.log(code),load(code);