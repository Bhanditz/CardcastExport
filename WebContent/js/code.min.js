const callsContainer=document.getElementById("calls"),responsesContainer=document.getElementById("responses");function getLastPathSegment(){return decodeURIComponent(new RegExp("[^\\/]+(?=\\/$|$)").exec(window.location.href)||[null,""])||null}function doRequest(e,n,t){const o=new XMLHttpRequest;o.onreadystatechange=function(){4===this.readyState&&(200===this.status?n(this):t(this))},o.open("GET",e,!0),o.send()}function load(e){doRequest("https://api.cardcastgame.com/v1/decks/"+e+"/calls",function(n){const t=n.responseText;doRequest("https://api.cardcastgame.com/v1/decks/"+e+"/responses",function(n){loaded(e,JSON.parse(t),JSON.parse(n.responseText))},function(e){error(e)})},function(e){error(e)})}function error(e){document.getElementById("loader").style.display="none",console.debug(e);const n=document.getElementById("error");n.style.display=null,400===e.status?n.innerHTML="404: Not found":n.innerHTML=e.status}function loaded(e,n,t){addLinks("Download original JSON",JSON.stringify,e,"_original.json","application/json",n,t),addLinks("Download simplified JSON",toSimplified,e,"_simplified.json","application/json",n,t),addLinks("Download as text",toText,e,"_text.txt","text/plain",n,t),document.getElementById("content").style.display=null,document.getElementById("loader").style.display="none"}function addLinks(e,n,t,o,s,a,d){callsContainer.appendChild(createLinkElm(e,"calls_"+t+o,n(a),s)),responsesContainer.appendChild(createLinkElm(e,"responses_"+t+o,n(d),s))}function toSimplified(e){const n=[];for(let t=0;t<e.length;t++)n.push(e[t].text.join("_"));return JSON.stringify(n)}function toText(e){let n="";for(let t=0;t<e.length;t++)n+=e[t].text.join("_")+"\r\n";return n}function generateLink(e,n){return window.URL.createObjectURL(new Blob([e],{type:n}))}function createLinkElm(e,n,t,o){const s=document.createElement("span");s.innerHTML=e,s.className="mdc-button__label";const a=document.createElement("button");a.appendChild(s),a.className="mdc-button mdc-button--outlined",mdc.ripple.MDCRipple.attachTo(a);const d=document.createElement("a");return d.appendChild(a),d.className="mb10",d.download=n,d.href=generateLink(t,o),d}const code=getLastPathSegment();console.debug(code),document.getElementById("code").innerHTML=code,load(code);